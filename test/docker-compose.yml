app:
  build: .
  command: python -u app.py
  ports:
    - "5000:5000"
  volumes:
    - .:/app
  links:
    - db
# Le app va être pour le conteneur flask
# build indique que ça va construire le conteneur basé sur l'image, basé sur le Dockerfile
# ce conteneur va lancer avec command le fichier app.py
# on lui donne également le port du serveur, le working directery dans le volume
# avec link on informe que ce conteneur sera relié à db

db:
  image: mongo:latest
  hostname: test_mongodb
  environment:
    - MONGO_INITDB_DATABASE=wiki_db
    - MONGO_INITDB_ROOT_USERNAME=root
    - MONGO_INITDB_ROOT_PASSWORD=pass
  volumes:
    - ./init-db.js:/docker-entrypoint-initdb.d/init-db.js:ro
  ports:
    - 27017:27017
# le db c'est pour la database
# dans image on indique la dernière version de mongo dans la création du conteneur
# on lui donne un nom avec hostname
# on définit l'environnement avec environnement, donc un nom à la database, un user et mdp
# le volume ici va initialiser les données de mongoDB à sa création, pour cela on a un fichier init-db.js
# avec mongo db tu as un port 